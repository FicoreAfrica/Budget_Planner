<!DOCTYPE html>
<html lang="{{ data.lang | default('en') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ trans('emergency_fund.title') | default('Your Savings Plan') }}</title>
    <style>
        body { font-family: Arial, sans-serif; color: #333; margin: 0; padding: 0; background-color: #f9f9f9; }
        .container { max-width: 600px; margin: 20px auto; padding: 20px; }
        .header { background: linear-gradient(45deg, #28a745, #007bff); color: white; padding: 15px; text-align: center; border-radius: 8px 8px 0 0; }
        .content { background: white; padding: 20px; border: 1px solid #ddd; border-radius: 0 0 8px 8px; }
        .footer { text-align: center; color: #777; font-size: 12px; padding: 10px; }
        a { color: #007bff; text-decoration: none; font-weight: bold; }
        .btn { display: inline-block; padding: 10px 20px; background: linear-gradient(45deg, #28a745, #007bff); color: white; text-decoration: none; border-radius: 5px; }
        ul { margin: 0; padding-left: 20px; }
        li { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>{{ trans('header_emergency_fund') | default('Savings Plan') }}</h1>
        </div>
        <div class="content">
            <p>{{ trans('greeting_dear') | default('Dear') }} {{ data.first_name || 'User' }},</p>
            <p>{{ trans('emergency_fund.summary_intro') | default('Here’s your savings plan') }}</p>
            <h2>{{ trans('fund_summary') | default('Summary') }}</h2>
            <p><strong>{{ trans('created_at') | default('Date') }}:</strong> {{ data.created_at }}</p>
            <p><strong>{{ trans('label_monthly_expenses') | default('Expenses') }}:</strong> ₦{{ data.monthly_expenses | format_number }}</p>
            <p><strong>{{ trans('label_income') | default('Income') }}:</strong> {% if data.monthly_income %}₦{% data.monthly_income | format_number %}{% else %}{{ trans('not_needed') | default('Not provided') }}{% endif %}</p>
            <p><strong>{{ trans('label_savings') | default('Savings') }}:</strong> ₦{{ data.current_savings | format_number }}</p>
            <p><strong>{{ trans('label_risk') | default('Risk') }}:</strong> {{ trans('label.risk_' + data.risk_tolerance_level) | default(data.risk_tolerance_level | capitalize) }}</p>
            <p><strong>{{ trans('label_dependents') | default('Dependents') }}:</strong> {{ data.dependents | default(0) }}</p>
            <p><strong>{{ trans('timeline') | default('Timeline') }}:</strong> {{ data.timeline }} {{ trans('months') | default('Months') }}</p>
            <p><strong>{{ trans('recommended_coverage') | default('Coverage') }}:</strong> {{ data.recommended_months }} {{ trans('months') | default('Months') }}</p>
            <p><strong>{{ trans('target') | default('Target') }}:</strong> ₦{{ data.target_amount | format_number }}</p>
            <p><strong>{{ trans('gap') | default('Gap') }}:</strong> ₦{{ data.savings_gap | format_number }}</p>
            {% if data.percent_of_income_needed %}
                <p><strong>{{ trans('percent_needed') | default('Income %') }}:</strong> {{ '%.2f' % data.percentage_of_income_needed }}%</p>
            {% endif %}
            <h3>{{ trans('badges') | default('Badges') }}</h3>
            {% if data.badges %}
                <ul>
                    {% for badge in data.badges %}
                        <li>{{ trans('badge_' + badge.lower()) | default(badge) }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>{{ trans('no_badges') | default('No badges yet') }}</p>
            {% endif %}
            <h3>{{ trans('recommendations') | default('Next Steps') }}</h3>
            <ul>
                {% if data.savings_gap > 0 %}
                    <li>{{ trans('save_monthly', { 'savings': data.monthly_needed | format_number, 'timeline': data.timeline }) | default('Save ₦' + (data.monthly_savings | format_number) + ' for ' + data.timeline + ' months') }}</li>
                    {% if data.percentage_of_income_needed > 30 %}
                        <li>{{ trans('high_income_tip') | default('High savings need. Cut expenses.') }}</li>
                    {% endif %}
                {% else %}
                    <li>{{ trans('maintain_fund') | default('Keep your fund growing') }}</li>
                {% endif %}
                {% if data.dependents > 2 %}
                    <li>{{ trans('large_family_tip', { 'months': data.recommended_months }) | default('Save for ' + data.recommended_months + ' months for family') }}</li>
                {% endif %}
                <li>{{ trans('use_savings_apps') | default('Use apps like PiggyVest') }}</li>
                <li>{{ trans('join_groups') | default('Join Ajo groups') }}</li>
            </ul>
            <p><a href="{{ data.cta_url }}" class="btn">{{ trans('view_dashboard') | default('See Dashboard') }}</a></p>
            <p>{{ trans('thank_you') | default('Thank you') }}</p>
        </div>
        <div class="footer">
            <p>{{ trans('powered_by') | default('By Ficore') }}</p>
        </div>
    </div>
</body>
</html>
