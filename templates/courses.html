{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h1 class="text-center" style="background: linear-gradient(to right, #0288D1, #2E7D32); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" role="heading" aria-level="1">
        {% if lang == 'ha' %} Koyarwa Kan Kudi {% else %} Financial Courses {% endif %}
    </h1>
    <div class="row mt-4" role="list">
        {% for course in courses %}
        <div class="col-md-4 mb-4" role="listitem">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title" id="course-{{ course.id }}">{{ course.title_ha if lang == 'ha' else course.title_en }}</h5>
                    <p class="card-text">
                        {% if course.is_premium %}
                            {% if lang == 'ha' %} Wannan darasi na biya ne {% else %} This is a premium course {% endif %}
                        {% else %}
                            {% if lang == 'ha' %} Darasi kyauta {% else %} Free course {% endif %}
                        {% endif %}
                        <br>
                        {% set course_progress = (user_progress | selectattr('data.course_id', 'equalto', course.id) | first) %}
                        {% if course_progress %}
                            {% if lang == 'ha' %}
                                Ci gaba: {{ course_progress.data.progress_percentage | round(2) }}%
                            {% else %}
                                Progress: {{ course_progress.data.progress_percentage | round(2) }}%
                            {% endif %}
                        {% endif %}
                    </p>
                    <button class="btn btn-primary speak-btn" 
                            style="background: linear-gradient(to right, #0288D1, #2E7D32); border: none;"
                            data-text="{{ course.title_ha if lang == 'ha' else course.title_en }}"
                            aria-label="{% if lang == 'ha' %} Sauke {{ course.title_ha }} {% else %} Read aloud {{ course.title_en }} {% endif %}">
                        <span class="sr-only">{% if lang == 'ha' %} Sauke {% else %} Read aloud {% endif %}</span>
                        ðŸ“£
                    </button>
                    <a href="{{ url_for('courses.course_page', course_id=course.id) }}" 
                       class="btn btn-primary" 
                       style="background: linear-gradient(to right, #0288D1, #2E7D32); border: none;"
                       aria-label="{% if lang == 'ha' %} Fara {{ course.title_ha }} {% else %} Start {{ course.title_en }} {% endif %}"
                       role="button">
                        {% if lang == 'ha' %} Fara Darasi {% else %} Start Course {% endif %}
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<script src="{{ url_for('static', filename='js/interactivity.js') }}"></script>
{% endblock %}
