{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h1 class="text-center" style="background: linear-gradient(to right, #0288D1, #2E7D32); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        {% if lang == 'ha' %} Koyarwa Kan Kudi {% else %} Financial Courses {% endif %}
    </h1>
    <div class="row mt-4">
        {% for course in courses %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">{{ course.title_ha if lang == 'ha' else course.title_en }}</h5>
                    <p class="card-text">
                        {% if course.is_premium %}
                            {% if lang == 'ha' %} Wannan darasi na biya ne {% else %} This is a premium course {% endif %}
                        {% else %}
                            {% if lang == 'ha' %} Darasi kyauta {% else %} Free course {% endif %}
                        {% endif %}
                        <br>
                        {% set course_progress = (user_progress | selectattr('data.course_id', 'equalto', course.id) | first) %}
                        {% if course_progress %}
                            {% if lang == 'ha' %}
                                Ci gaba: {{ course_progress.data.progress_percentage | round(2) }}%
                            {% else %}
                                Progress: {{ course_progress.data.progress_percentage | round(2) }}%
                            {% endif %}
                        {% endif %}
                    </p>
                    <a href="{{ url_for('courses.course_page', course_id=course.id) }}" 
                       class="btn btn-primary" 
                       style="background: linear-gradient(to right, #0288D1, #2E7D32); border: none;">
                        {% if lang == 'ha' %} Fara Darasi {% else %} Start Course {% endif %}
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
